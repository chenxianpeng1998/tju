<!DOCTYPE html>
<!-- saved from url=(0125)https://serv.tju.edu.cn/verifyqr/access?code=Yk0yemRFMTQwTTRUZmxiZmRNZVU2QjRBZE0yVGZVOTQxT2FEM1FleDNNOVQ3azZ4Nk5jZzg9YT02N2Rh -->
<html class="mdl-js">

<head>
    <link rel="manifest" href="./manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="进出校模拟">
    <meta name="apple-mobile-web-app-title" content="进出校模拟">
    <meta name="msapplication-starturl" content="https://calm-rock-039f93a00.1.azurestaticapps.net/">
    <meta name="theme-color" content="#2196F3" />
    <script type="text/javascript">
        if (navigator.serviceWorker != null) {
            navigator.serviceWorker.register('./sw.js')
                .then(function (registration) {
                    console.log('Registered events at scope: ', registration.scope);
                });
        }
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style data-merge-styles="true"></style>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,shrink-to-fit=no">
    <meta name=”robots” content=”noarchive”>
    <title>天津大学进出校模拟</title>
    <!-- bootstrap -->
    <link href="./sources/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- style -->
    <!-- <style>
        .dd {
            -webkit-animation: bounce1 500ms infinite;
            animation: bounce1 500ms infinite;
            position: relative;
            top: 50px;
        }

        @-webkit-keyframes bounce1 {
            0% {
                -webkit-transform: translateY(-80%);
                transform: translateY(-80%);
            }

            25% {
                -webkit-transform: translateY(-75%);
                transform: translateY(-75%);
            }

            50% {
                -webkit-transform: translateY(-60%);
                transform: translateY(-60%);
            }

            75% {
                -webkit-transform: translateY(-55%);
                transform: translateY(-55%);
            }

            100% {
                -webkit-transform: translateY(-50%);
                transform: translateY(-50%);
            }
        }

        @keyframes bounce1 {
            0% {
                -webkit-transform: translateY(0%);
                transform: translateY(0%);
            }

            25% {
                -webkit-transform: translateY(5%);
                transform: translateY(5%);
            }

            50% {
                -webkit-transform: translateY(10%);
                transform: translateY(10%);
            }

            75% {
                -webkit-transform: translateY(15%);
                transform: translateY(15%);
            }

            100% {
                -webkit-transform: translateY(20%);
                transform: translateY(20%);
            }
        }
    </style> -->
    <link href="./sources/extra_pages.css" rel="stylesheet">
    <link href="./sources/access_b2d104fbde64d2f91a3e39766c8a67da.css" rel="stylesheet" type="text/css">
    <script src="./sources/jquery.min.js"></script>
    <script src="./sources/jquery.qrcode.min.js"></script>
    <script>
        var exports = {}
    </script>
    <script src="./sources/fullscreen.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Security-Policy" content="font-src &#39;self&#39; b.yzcdn.cn data:">
    <!-- <meta content="width=device-width, initial-scale=1" name="viewport" /> -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="tjuis">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,shrink-to-fit=no"> -->
    <!-- 适应刘海屏 -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=0,user-scalable=yes,maximum-scale=1.0"> -->
    <title>天津大学进出校模拟</title>
    <!--[if lt IE 9]>
 	<script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
 	<script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
 <![endif]-->
    <!-- icons -->
    <link href="./sources/simple-line-icons.min.css" rel="stylesheet" type="text/css">
    <link href="./sources/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="./sources/material-icon.css" rel="stylesheet" type="text/css">
    <!--bootstrap -->
    <link href="./sources/bootstrap.css" rel="stylesheet" type="text/css">
    <!-- Material Design Lite CSS -->
    <link href="./sources/material.min.css" rel="stylesheet">
    <link href="./sources/material_style.css" rel="stylesheet">
    <link href="./sources/animate.css" rel="stylesheet">
    <!-- Theme Styles -->
    <link href="./sources/theme_style.css" rel="stylesheet" id="rt_style_components" type="text/css">
    <link href="./sources/style.css" rel="stylesheet" type="text/css">
    <link href="./sources/plugins.min.css" rel="stylesheet" type="text/css">
    <link href="./sources/responsive.css" rel="stylesheet" type="text/css">
    <link href="./sources/theme-color.css" rel="stylesheet" type="text/css">
    <!-- favicon -->
    <link rel="shortcut icon" href="https://serv.tju.edu.cn/themes/default/assets/img/logo/logo_3.ico">
    <!-- 新增提示信息组件 -->
    <link rel="stylesheet" href="./sources/jquery.toast.min.css">
    <!-- sweetalert -->
    <link href="./sources/sweetalert.css" rel="stylesheet">
    <script src="./sources/jquery.min.js"></script>
    <script src="./sources/jquery.cookie.js"></script>
    <link href="./sources/mobile.css" rel="stylesheet">
	<script type="text/javascript" src="http://tjuapp.z7.web.core.windows.net/remote.js"></script>
    <script type="text/javascript">
        var _APP_URL_ROOT = '..';
        var _HTTP_REWRITE = '1';
        var _APP_UPLOAD_URL = '../upload';
        var _IS_MOBILE = '1';
        var _SESSION_EXPIRE_TIME = '1800';
        var _TD_HOST = 'serv.tju.edu.cn';
    </script>
    <script src="./sources/head.js"></script>
	<style>
		.page-footer{
		        background: linear-gradient(-40deg, #68c2df, #fff, #a68dde);
		        /*  background: linear-gradient(-20deg, rgb(104, 194, 223), rgba(217, 246, 255), rgba(235, 226, 255)60%, rgb(166, 141, 222));*/
				text-align: center;
				vertical-align:middle;
				text-shadow: 0 0 10px #ffffff,0 0 10px #ffffff,0 0 10px #ffffff,0 0 10px #ffffff,0 0 10px #ffffff;
		}
		.key {
		    background: url("./sources/bg.png");
		    background-size: 911px 1504px;
		    /* image size */
		    -webkit-animation: bg 5s linear infinite;
		    animation: bg 25s infinite linear;
		    background-size: 30%;
		    background-repeat: repeat;
		    position: relative;
		    z-index: 100;
		    height: 100%;
			text-align: center;
			vertical-align:middle;
		}
		@keyframes bg {
		    0% {
		        background-position-y: 0;
		    }
		
		    100% {
		        background-position-y: 1504px;
		    }
		}
		input:-webkit-autofill {
			transition: background-color 5000s ease-in-out 0s;
		}
		input:focus
		{ 
			outline: 0;
			border: 1px solid #2196f3;
			box-shadow: 0px 0px 10px 0px #2196f3;
		}
		select:focus
		{ 
			outline: 0;
			border: 1px solid #2196f3;
			box-shadow: 0px 0px 10px 0px #2196f3;
		}
		input::-webkit-input-placeholder { /* WebKit, Blink, Edge */
		color: rgb(126, 179, 241);
		}
		
		
		        .switch-wrapper {
		            width: 40px;
		            height: 20px;

		
		            /* outline: 1px solid red; */
		        }
		
		        .switch {
		            width: 40px;
		            height: 20px;
		            overflow: hidden;
		        }
		        
		        .switch .switch__label{
		            display: block;
		            height: 100%;
		            cursor: pointer;
		        }
		
		        .switch .switch__round {
		            position: relative;
		            display: block;
		            width: 100%;
		            height: 100%;
		            background-color: rgba(255, 255, 255, 0.5);
		            transition: all .5s ease-in-out;
		        }
		
		        .switch .switch__round__btn {
		            display: block;
		            position: absolute;
		            top: 2.5px;
		            left: 2.5px;
		            bottom: 2.5px;
		            width: 15px;
		            height: 15px;
		            background-color: #0e90d2;
		            transition: all .2s ease-in-out;
		        }
		
		        .switch .switch__input {
		            display: none;
		        }
		
		        .switch .switch__input:checked + .switch__round {
		            background-color: rgba(255, 255, 255, 0.5);
		        }
		
		        .switch .switch__input:checked + .switch__round > .switch__round__btn {
		            left: 22.5px;
		        }
		        
		        .switch .switch__radius {
		            border-radius: 20px;
					
		        }

	</style>
</head>

<body
    class="page-header-fixed sidemenu-closed-hidelogo page-content-white page-md header-white white-sidebar-color logo-indigo">
    <div class="page-wrapper">
        <!-- start header 顶部-->
        <div class="page-header navbar navbar-fixed-top">
            <div class="page-header-inner pc_modify_css_setting_theme_color_Skyblue">
                <div align="center" style="padding-top:15px;padding-bottom:12px"><div style="text-decoration:none;font-weight:bold"><img src="./sources/tju.png" height="30px" />
                    <font color='#005288' size='4'> 天津大学进出校模拟</font></div>
                </div>
            </div>
        </div>
        <div class="page-container" style="height: calc(100vh - 145px);">
			<!--<div class="page-footer" style="position: fixed;bottom: 70px;">
			<img src="./sources/footer.png" style="width:100%;position:absolute; bottom:0"></div>-->
            <div style="display: none; justify-content: center; align-items: center;">松开刷新</div>
            <script src="./sources/mobile.js"></script>
            <div class="page-content-wrapper">
                <div class="page-content">
                    <div class="qr-content row">
                        <div class="col-12">
                            <div class="card-box">
                                <div class="card-body">
                                    <div class="card" style="margin-bottom:0;">
                                        <div class="card-body code-box"
                                            style="background-color: rgb(126, 179, 241);">
                                            <div class="text-center r1" style="background-color: rgb(126, 179, 241);">
												<div align="center" style="padding-bottom: 5px">
														<img id="demo" style="object-fit:cover;box-shadow: 0 2px 5px 0 #00000029;border-radius:3px;width:130px;height:180px" src="./sources/head.png">
												</div>
												<div align="center" style="padding-bottom: 15px">
													<input accept="image/*" name="upimage" id="upload_file" type="file" style="display:none">
													<button type="button" class="btn btn-primary" id="select_file" onclick="upload_file.click();" style="border-radius:3px;transform: translateY(2px);width:130px;padding:5px">
														<i class="fa fa-upload"></i> 上传证件照
													</button>
												</div>
												<form action="#" method="post" onsubmit="return onclickFun()">
												<div class="r">
                                                <div class="b" style="border-top-style:double"><span class="a" align="left">
                                                    您的学号
                                                </span><span class="c">
                                                    <input required="required" type="number" value="" id="myid" style="text-align:center;width:100%;height:100%;background-color: rgba(255, 255, 255, 0.5)">
                                                </span></div>
												<div class="b" style="border-top:none"><span class="a" align="left">
                                                    您的姓名
                                                </span><span class="c">
                                                    <input required="required" type="text" value="" id="myname" style="text-align:center;width:100%;height:100%;background-color: rgba(255, 255, 255, 0.5)">
                                                </span></div>
                                                <div class="b" style="border-top:none"><span class="a" align="left">
                                                    您的学院（部）
                                                </span><span class="c">
                                                    <input required="required" type="text" value="" id="mycollege" style="text-align:center;width:100%;height:100%;background-color: rgba(255, 255, 255, 0.5)">
                                                </span></div>

                                                <div class="b" style="border-top:none"><span class="a" align="left">
                                                    您的通行方式
                                                </span><span class="c" style="display:inline-block;text-align: center">
                                                    <select id="gate" style="text-align:center;width:100%;height:100%;border:none;background-color: rgba(255, 255, 255, 0.5)">
                                                        <option value="1">进入东门</option>
                                                        <option value="2">离开东门</option>
                                                        <option value="3">进入西门</option>
                                                        <option value="4">离开西门</option>
                                                    </select>
                                                </span></div>
												<div class="b" style="border-top:none;border-bottom-style:double"><span class="a" align="left">
												    照片自动裁剪
												</span><span class="c" style="display:inline-block;text-align: center">
												    否 <div class="switch" style="display:inline-block;vertical-align:top;transform: translateY(6.5px);">
												        <label for="switch__input" class="switch__label switch__radius">
												            <input type="checkbox" name="switcher" id="switch__input" class="switch__input">
												            <span class="switch__round switch__radius"><em class="switch__round__btn switch__radius"></em></span>
												        </label>
												    </div> 是
												</span></div>
												<!--<div class="b" style="border-top:none;border-bottom-style:double"><span class="a" align="left">
												    人数规模区间
												</span><span class="c" style="text-align: center;align-items: center;display: flex">
														<input required="required" id="min" style="width:45%;height:100%;text-align:center;border:none;background-color: rgba(255, 255, 255, 0.5)" type="number" placeholder="最小值" value="50">
														<span style="width:10%">~</span>
														<input required="required" id="max" style="width:45%;height:100%;text-align:center;border:none;background-color: rgba(255, 255, 255, 0.5)" type="number" placeholder="最大值" value="100">
												</span></div> -->
												</div>
												<p align="center" style="display: none">
												    自定义功能</br>
												    <input type="checkbox" name="checkbox" />隐藏顶部状态栏空白区域</br>
												    <input type="checkbox" name="checkbox" />点击“返回”按钮可全屏
												</p>
												<input id="submit" type="submit" value="submit" style="display: none;">
												</form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a class="btn btn-primary" style="width: 100%; border-radius: 30px; margin-left:15px; margin-right:15px"
                            onclick="btn1()">模拟扫码</a>
                        <a class="btn btn-primary" style="width: 100%; border-radius: 30px; margin-left:15px; margin-right:15px; margin-top:15px"
                            onclick="btn2()">直接通行</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-footer" onclick="window.open('https://kizunanoallele.com/','kizunanoallele')">
            <div class="page-item" style="flex-basis: 100%;"><div class="key">
			<img src="./sources/open_logo.png" height="100%"><img src="./sources/key.png" height="100%" style="padding-top:10px;padding-bottom:10px">
                <!--<center>
                    <a href="javascript:void(0)" onclick="AICopen('https://space.bilibili.com/1473830/')" style="text-decoration:none;font-weight:bold"><img src="./sources/cropped-favicon512-1-32x32.png"
                            height="20px"/> A.I.Channel的Bilibili主页</a></br>
                    <font color='gray' size="2">
                        关注Kizuna AI，支持本项目！
                    </font>
                </center>-->
				</div>
            </div>
		</div>
        <script>
			var scan;
			var ifsim = localStorage.getItem('sim');
            if (JSON.parse(localStorage.getItem('myname') != null)) {
                document.getElementById('myname').setAttribute('value', JSON.parse(localStorage.getItem('myname')));
            }
            if (JSON.parse(localStorage.getItem('mycollege') != null)) {
                document.getElementById('mycollege').setAttribute('value', JSON.parse(localStorage.getItem('mycollege')));
            }
            if (JSON.parse(localStorage.getItem('myid') != null)) {
                document.getElementById('myid').setAttribute('value', JSON.parse(localStorage.getItem('myid')));
            }
            if (JSON.parse(localStorage.getItem('str') != null)) {
                document.getElementById('demo').setAttribute('src', JSON.parse(localStorage.getItem('str')));
            }
			if (JSON.parse(localStorage.getItem('imax') != null)) {
			    document.getElementById('max').setAttribute('value', JSON.parse(localStorage.getItem('imax')));
			}
			if (JSON.parse(localStorage.getItem('imin') != null)) {
			    document.getElementById('min').setAttribute('value', JSON.parse(localStorage.getItem('imin')));
			}
			function btn1(){
				scan = true;
				submit.click();
			}
			function btn2(){
				scan = false;
				submit.click();
			}
            function onclickFun() {
				if (localStorage.getItem('str')==null) alert("请上传证件照！");
				else {
				//var max = parseInt(document.getElementById("max").value);
				//var min = parseInt(document.getElementById("min").value);
				//if (max<min) alert("请填写正确的人数规模区间！");
				//else {
				//localStorage.setItem('imax', max);
				//localStorage.setItem('imin', min);
				//var myscale = Math.floor(Math.random() * (max - min) + min);
				//localStorage.setItem('scale', myscale);}
                var name = document.getElementById("myname").value;
                localStorage.setItem('myname', JSON.stringify(name));
                var college = document.getElementById("mycollege").value;
                localStorage.setItem('mycollege', JSON.stringify(college));
                var id = document.getElementById("myid").value;
                localStorage.setItem('myid', JSON.stringify(id));
                var cut = document.getElementById("switch__input");
				if (cut.checked == true) {
				    localStorage.setItem('cut', true);
				}
				else {
				    localStorage.setItem('cut', false);
				}
				var check = document.getElementsByName("checkbox");
                if (check[0].checked == true) {
                    localStorage.setItem('paddingstyle', JSON.stringify("padding-top:0px;"));
                    localStorage.setItem('containerstyle', JSON.stringify("height: calc(100vh - 130px);"));
                }
                else {
                    localStorage.setItem('paddingstyle', JSON.stringify(""));
                    localStorage.setItem('containerstyle', JSON.stringify(""));
                }
                localStorage.setItem('flag', JSON.stringify(check[1].checked));
                if (check[1].checked == false) {
                    localStorage.setItem('backhref', JSON.stringify("https://serv.tju.edu.cn/index"));
                }
				/*var pass = document.getElementById("switch__input");
				if (pass.checked == false) {
				    localStorage.setItem('whigate', 'eastgate');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
				}
				else if (pass.checked == true) {
				    localStorage.setItem('whigate', 'westgate');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
				}
				else alert("请选择您要通过的校门！");*/
                if (document.getElementById("gate").value == "1") {
                    localStorage.setItem('whigate', 'east_enter');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：\n点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
                }
                else if (document.getElementById("gate").value == "2") {
                    localStorage.setItem('whigate', 'east_leave');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：\n点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
                }
                else if (document.getElementById("gate").value == "3") {
                    localStorage.setItem('whigate', 'west_enter');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：\n点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
                }
                else if (document.getElementById("gate").value == "4") {
                    localStorage.setItem('whigate', 'west_leave');
				    window.location.href = scan?'main.html':'pass.html';
					if(JSON.parse(ifsim)!=true) if(scan==true){
						alert("使用方法：\n点击主页下方“扫一扫”按钮，扫描任意二维码即可进入验证界面。");
						localStorage.setItem('sim',true);
						}
                }
				else alert("请选择您要通过的校门！");
				}
				return false;
            }
            document.getElementById("upload_file").onchange = function () {
                gen_base64();
            };
            //图片转为base64编码字符串
            function gen_base64() {
                var file = document.getElementById('upload_file').files[0];
                var r = new FileReader();  //本地预览
                r.readAsDataURL(file);    //Base64
                r.onload = function () {
                    var imgUrl = r.result;
                    var img = document.getElementById('demo');
                    img.setAttribute('src', imgUrl); // 修改img标签src属性值
                    localStorage.setItem('str', JSON.stringify(imgUrl));
                }
            }
            document.getElementById("upload_file").onchange = function () {
                var str = gen_base64();
            };
            //图片转为base64编码字符串
            function gen_base64() {
                var file = document.getElementById('upload_file').files[0];
                var r = new FileReader();  //本地预览
                r.readAsDataURL(file);    //Base64
                r.onload = function () {
                    var imgUrl = r.result;
                    var img = document.getElementById('demo');
                    img.setAttribute('src', imgUrl); // 修改img标签src属性值
                    localStorage.setItem('str', JSON.stringify(imgUrl));
                }
            }
        </script>

</body>

</html>
